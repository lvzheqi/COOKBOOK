\documentclass[12pt,a4paper,twoside,headsepline,titlepage]{scrartcl}
\raggedbottom
\usepackage[headsepline,automark]{scrpage2}
\usepackage{ngerman,multicol,makeidx,graphicx,hyperref,ifthen}
\usepackage[portrait]{geometry}
\geometry{a4paper,left=20mm,right=20mm, top=22mm, bottom=22mm}
\usepackage[utf8]{inputenc}
\usepackage{pdfpages}
\usepackage{pgffor}
\usepackage{ifthen}

\hypersetup{colorlinks,breaklinks=true,
            linkcolor=black,
            bookmarksnumbered,citecolor=black, 
            urlcolor=black}
\setcounter{secnumdepth}{0}
\parindent0pt
\parskip1ex
\defpagestyle{meinstil}{% 
{\headmark \hfill}
{\hfill \headmark}
{\hfill \headmark\hfill } 
(\textwidth,.4pt)
}{%
(\textwidth,.4pt)
{ \today \hfill \pagemark}
{\pagemark\hfill \today}
{\today\hfill\pagemark}
} 
\pagestyle{meinstil}

\makeindex
\newlength{\halbeseite}\setlength{\halbeseite}{0.5\textwidth}
\addtolength{\halbeseite}{-3pt}

\newlength{\seite} \setlength{\seite}{\textwidth} 
\addtolength{\seite}{-3pt}
\renewcommand{\nopagebreak}[2]{\par \vspace{0ex} #1  \begin{minipage}{\seite} #2
\end{minipage} \par \vspace{0ex} }

\catcode`\@=11
\def\maxwidth{%
 \ifdim\Gin@nat@width>\halbeseite\halbeseite\else\Gin@nat@width\fi}
\def\l@subsection{\@dottedtocline{2}{2.5em}{3.3em}}
\def\l@subsubsection{\@dottedtocline{3}{4.8em}{4.2em}}
\def\l@paragraph{\@dottedtocline{4}{7.0em}{4.1em}}
\def\l@subparagraph{\@dottedtocline{5}{10em}{5em}}
\catcode`\@=12


\newcommand{\bild}[1]{\vspace{0.5ex}\par\begin{center}
\includegraphics[width=\maxwidth]{#1}\end{center}}

\newcommand{\icons}[3]{\vspace{0.5ex}
	\begin{flushleft}
			\ifnum #3>0
		\foreach \index in {1, ..., #3} {%
			\includegraphics[height=0.8cm]{#1}
		}
		\fi
		\ifnum #3<5
		\foreach \index in {#3,...,4} {%
			\includegraphics[height=0.8cm]{#2}
		}
		\fi
		\end{flushleft}
	}
\date{\today}
